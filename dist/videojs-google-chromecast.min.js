/*! @name videojs-google-chromecast @version 0.0.4 @license UNLICENSED */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js"),require("node-mdns-easy")):"function"==typeof define&&define.amd?define(["video.js","node-mdns-easy"],e):(t=t||self).videojsGoogleChromecast=e(t.videojs,t.Mdns)}(this,(function(t,e){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};function i(t,e){return t(e={exports:{}},e.exports),e.exports}var r=i((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e})),a=i((function(t){function e(n,i){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e}));var o=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")};var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}},c=i((function(t){function e(n,i,r){return s()?t.exports=e=Reflect.construct:t.exports=e=function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&a(r,n.prototype),r},e.apply(null,arguments)}t.exports=e})),u=i((function(t){function e(n){var i="function"==typeof Map?new Map:void 0;return t.exports=e=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return c(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)},e(n)}t.exports=e}));var l=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e};function h(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(function(){var t,e=this||self,i=function(t){return void 0!==t},r=function(){},a=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},o=function(t){var e=a(t);return"array"==e||"object"==e&&"number"==typeof t.length},s=function(t){return"function"==a(t)},c=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},p=function(t,e,n){return t.call.apply(t.bind,arguments)},d=function(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},f=function(t,e,n){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:d).apply(null,arguments)},m=Date.now||function(){return+new Date},y=function(t,n){t=t.split(".");var r,a=e;t[0]in a||void 0===a.execScript||a.execScript("var "+t[0]);for(;t.length&&(r=t.shift());)!t.length&&i(n)?a[r]=n:a=a[r]&&a[r]!==Object.prototype[r]?a[r]:a[r]={}},v=function(t,e){function n(){}n.prototype=e.prototype,t.kc=e.prototype,t.prototype=new n,t.prototype.constructor=t},g=function t(e){if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=Error().stack;n&&(this.stack=n)}e&&(this.message=String(e))};v(g,Error),g.prototype.name="CustomError";var E=function(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");g.call(this,n+t[i])};v(E,g),E.prototype.name="AssertionError";var S,C=function(t,e){throw new E("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))},b=function(t,e){if(e)t=t.replace(_,"&amp;").replace(T,"&lt;").replace(I,"&gt;").replace(N,"&quot;").replace(A,"&#39;").replace(w,"&#0;");else{if(!k.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(T,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(I,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(N,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(A,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(w,"&#0;"))}return t},_=/&/g,T=/</g,I=/>/g,N=/"/g,A=/'/g,w=/\x00/g,k=/[\x00&<>"']/;t:{var D=e.navigator;if(D){var L=D.userAgent;if(L){S=L;break t}}S=""}var P=function(t,e){this.Ra=t===H&&e||"",this.rb=M};P.prototype.N=!0,P.prototype.M=function(){return this.Ra},P.prototype.toString=function(){return"Const{"+this.Ra+"}"};var M={},H={},O=new P(H,""),R=function(){this.Ja=""};R.prototype.N=!0,R.prototype.M=function(){return this.Ja.toString()},R.prototype.toString=function(){return"SafeScript{"+this.Ja+"}"},R.prototype.G=function(t){return this.Ja=t,this},(new R).G("");var x=function(){this.na="",this.pb=null,this.sb=B};(t=x.prototype).N=!0,t.M=function(){return this.na.toString()},t.$a=!0,t.Za=function(){return 1},t.toString=function(){return"TrustedResourceUrl{"+this.na+"}"};var B={},G=function(){this.La=""};G.prototype.N=!0,G.prototype.M=function(){return this.La},G.prototype.toString=function(){return"SafeStyle{"+this.La+"}"},G.prototype.G=function(t){return this.La=t,this},(new G).G("");var j=function(){this.Ka=""};j.prototype.N=!0,j.prototype.M=function(){return this.Ka},j.prototype.toString=function(){return"SafeStyleSheet{"+this.Ka+"}"},j.prototype.G=function(t){return this.Ka=t,this},(new j).G("");var U=function(){this.ma="",this.qb=q,this.Wa=null};(t=U.prototype).$a=!0,t.Za=function(){return this.Wa},t.N=!0,t.M=function(){return this.ma.toString()},t.toString=function(){return"SafeHtml{"+this.ma+"}"};var V=function(t){return t instanceof U&&t.constructor===U&&t.qb===q?t.ma:(C("expected object of type SafeHtml, got '"+t+"' of type "+a(t)),"type_error:SafeHtml")},F=function(t){if(t instanceof U)return t;var e="object"==typeof t,n=null;return e&&t.$a&&(n=t.Za()),K(b(e&&t.N?t.M():String(t)),n)},q={},K=function(t,e){return(new U).G(t,e)};U.prototype.G=function(t,e){return this.ma=t,this.Wa=e,this},K("<!DOCTYPE html>",0);var J=K("",0);K("<br>",0);var W,Y,z=(Y=!1,function(){return Y||(W=function(){if("undefined"==typeof document)return!1;var t=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),t.appendChild(e),!!t.firstChild&&(e=t.firstChild.firstChild,t.innerHTML=V(J),!e.parentElement)}(),Y=!0),W}),Z=function(t,e,n){this.reset(t,e,n,void 0,void 0)};Z.prototype.ea=null,Z.prototype.reset=function(t,e,n,i,r){this.ob=i||m(),this.H=t,this.Rb=e,this.bb=n,delete this.ea},Z.prototype.Pa=function(t){this.H=t},Z.prototype.getMessage=function(){return this.Rb};var $=function(t){this.eb=t,this.X=this.sa=this.H=this.s=null},X=function(t,e){this.name=t,this.value=e};X.prototype.toString=function(){return this.name};var Q=new X("SEVERE",1e3),tt=new X("WARNING",900),et=new X("INFO",800),nt=new X("CONFIG",700),it=[new X("OFF",1/0),new X("SHOUT",1200),Q,tt,et,nt,new X("FINE",500),new X("FINER",400),new X("FINEST",300),new X("ALL",0)],rt=null;$.prototype.getName=function(){return this.eb},$.prototype.getParent=function(){return this.s},$.prototype.getChildren=function(){return this.sa||(this.sa={}),this.sa},$.prototype.Pa=function(t){this.H=t};$.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.H?e.H:e.s?t(e.s):(C("Root logger has no level set."),null)}(this).value)for(s(e)&&(e=e()),t=new Z(t,String(e),this.eb),n&&(t.ea=n),n=this;n;){var i=n,r=t;if(i.X)for(var a=0;e=i.X[a];a++)e(r);n=n.getParent()}},$.prototype.info=function(t,e){this.log(et,t,e)};var at={},ot=null,st=function(){ot||(ot=new $(""),at[""]=ot,ot.Pa(nt))},ct=function(){return st(),ot},ut=function t(e){var n;if(st(),!(n=at[e])){n=new $(e);var i=e.lastIndexOf("."),r=e.substr(i+1);(i=t(e.substr(0,i))).getChildren()[r]=n,n.s=i,at[e]=n}return n},lt=function(t){He&&He.log(tt,t,void 0)},ht=function(){this.ib=m()},pt=null;ht.prototype.set=function(t){this.ib=t},ht.prototype.reset=function(){this.set(m())},ht.prototype.get=function(){return this.ib};var dt=function(t){this.Yb=t||"",pt||(pt=new ht),this.jc=pt};(t=dt.prototype).Sa=!0,t.mb=!0,t.gc=!0,t.fc=!0,t.nb=!1,t.hc=!1;var ft=function(t){return 10>t?"0"+t:String(t)},mt=function(t){dt.call(this,t)};v(mt,dt);var yt=function(){this.Zb=f(this.tb,this),this.fa=new mt,this.fa.mb=!1,this.fa.nb=!1,this.ab=this.fa.Sa=!1,this.Cb={}};yt.prototype.tb=function(t){if(!this.Cb[t.bb]){var e=function(t,e){var n=[];if(n.push(t.Yb," "),t.mb){var i=new Date(e.ob);n.push("[",ft(i.getFullYear()-2e3)+ft(i.getMonth()+1)+ft(i.getDate())+" "+ft(i.getHours())+":"+ft(i.getMinutes())+":"+ft(i.getSeconds())+"."+ft(Math.floor(i.getMilliseconds()/10)),"] ")}return t.gc&&n.push("[",function(t,e){e=(t=(t.ob-e)/1e3).toFixed(3);var n=0;if(1>t)n=2;else for(;100>t;)n++,t*=10;for(;0<n--;)e=" "+e;return e}(e,t.jc.get()),"s] "),t.fc&&n.push("[",e.bb,"] "),t.hc&&n.push("[",e.H.name,"] "),n.push(e.getMessage()),t.nb&&(e=e.ea)&&n.push("\n",e instanceof Error?e.message:e.toString()),t.Sa&&n.push("\n"),n.join("")}(this.fa,t),n=gt;if(n){var i=function(t){if(t){if(t.value>=Q.value)return"error";if(t.value>=tt.value)return"warn";if(t.value>=nt.value)return"log"}return"debug"}(t.H);Et(n,i,e,t.ea)}}};var vt=null,gt=e.console,Et=function(t,e,n,i){t[e]?t[e](n,i||""):t.log(n,i||"")},St={pc:!0},Ct=function(){throw Error("Do not instantiate directly")};Ct.prototype.Ua=null,Ct.prototype.getContent=function(){return this.content},Ct.prototype.toString=function(){return this.content};var bt=function(){Ct.call(this)};v(bt,Ct),bt.prototype.Va=St;var _t,Tt=function(){function t(t,e,n){this.Ob=n,this.xb=t,this.bc=e,this.ka=0,this.ha=null}var e=t.prototype;return e.get=function(){var t;return 0<this.ka?(this.ka--,t=this.ha,this.ha=t.next,t.next=null):t=this.xb(),t},e.put=function(t){this.bc(t),this.ka<this.Ob&&(this.ka++,t.next=this.ha,this.ha=t)},t}(),It=function(t){e.setTimeout((function(){throw t}),0)},Nt=function(){var t=e.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&-1==S.indexOf("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){if(O instanceof P&&O.constructor===P&&O.rb===M)var n=O.Ra;else C("expected object of type Const, got '"+O+"'"),n="type_error:Const";var i=new x;i.na=n;t:{try{var r=t&&t.ownerDocument,o=r&&(r.defaultView||r.parentWindow);if((o=o||e).Element&&o.Location){var s=o;break t}}catch(t){}s=null}if(s&&void 0!==s.HTMLIFrameElement&&(!t||!(t instanceof s.HTMLIFrameElement)&&(t instanceof s.Location||t instanceof s.Element))){if(c(t))try{var u=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){u="<object could not be stringified>"}else u=void 0===t?"undefined":null===t?"null":typeof t;C("Argument is not a %s (or a non-Element, non-Location mock); got: %s","HTMLIFrameElement",u)}i.pb?n=i.pb:(i instanceof x&&i.constructor===x&&i.sb===B?n=i.na:(C("expected object of type TrustedResourceUrl, got '"+i+"' of type "+a(i)),n="type_error:TrustedResourceUrl"),n=n.toString()),t.src=n}(t),document.documentElement.appendChild(t);var n=t.contentWindow;(t=n.document).open(),t.write(V(J)),t.close();var i="callImmediate"+Math.random(),r="file:"==n.location.protocol?"*":n.location.protocol+"//"+n.location.host;t=f((function(t){"*"!=r&&t.origin!=r||t.data!=i||this.port1.onmessage()}),this),n.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(i,r)}}}),void 0!==t&&-1==S.indexOf("Trident")&&-1==S.indexOf("MSIE")){var n=new t,r={},o=r;return n.port1.onmessage=function(){if(i(r.next)){var t=(r=r.next).Ta;r.Ta=null,t()}},function(t){o.next={Ta:t},o=o.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){e.setTimeout(t,0)}},At=function(){this.pa=this.V=null},wt=new Tt((function(){return new kt}),(function(t){t.reset()}),100);At.prototype.add=function(t,e){var n=wt.get();n.set(t,e),this.pa?this.pa.next=n:this.V=n,this.pa=n},At.prototype.remove=function(){var t=null;return this.V&&(t=this.V,this.V=this.V.next,this.V||(this.pa=null),t.next=null),t};var kt=function(){this.next=this.scope=this.xa=null};kt.prototype.set=function(t,e){this.xa=t,this.scope=e,this.next=null},kt.prototype.reset=function(){this.next=this.scope=this.xa=null};var Dt,Lt=function(t,e){Dt||Pt(),Mt||(Dt(),Mt=!0),Ht.add(t,e)},Pt=function(){if(e.Promise&&e.Promise.resolve){var t=e.Promise.resolve(void 0);Dt=function(){t.then(Ot)}}else Dt=function(){var t=Ot;!s(e.setImmediate)||e.Window&&e.Window.prototype&&-1==S.indexOf("Edge")&&e.Window.prototype.setImmediate==e.setImmediate?(_t||(_t=Nt()),_t(t)):e.setImmediate(t)}},Mt=!1,Ht=new At,Ot=function(){for(var t;t=Ht.remove();){try{t.xa.call(t.scope)}catch(t){It(t)}wt.put(t)}Mt=!1},Rt=function(t){if(this.l=0,this.jb=void 0,this.J=this.w=this.s=null,this.ga=this.wa=!1,t!=r)try{var e=this;t.call(void 0,(function(t){qt(e,2,t)}),(function(t){if(!(t instanceof Xt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}qt(e,3,t)}))}catch(t){qt(this,3,t)}},xt=function(){this.next=this.context=this.R=this.Z=this.F=null,this.ca=!1};xt.prototype.reset=function(){this.context=this.R=this.Z=this.F=null,this.ca=!1};var Bt=new Tt((function(){return new xt}),(function(t){t.reset()}),100),Gt=function(t,e,n){var i=Bt.get();return i.Z=t,i.R=e,i.context=n,i},jt=function(){var t,e,n=new Rt((function(n,i){t=n,e=i}));return new Qt(n,t,e)};Rt.prototype.then=function(t,e,n){return Ft(this,s(t)?t:null,s(e)?e:null,n)},Rt.prototype.$goog_Thenable=!0,Rt.prototype.cancel=function(t){0==this.l&&Lt((function(){var e=new Xt(t);Ut(this,e)}),this)};var Ut=function t(e,n){if(0==e.l)if(e.s){var i=e.s;if(i.w){for(var r=0,a=null,o=null,s=i.w;s&&(s.ca||(r++,s.F==e&&(a=s),!(a&&1<r)));s=s.next)a||(o=s);a&&(0==i.l&&1==r?t(i,n):(o?((r=o).next==i.J&&(i.J=r),r.next=r.next.next):Wt(i),Yt(i,a,3,n)))}e.s=null}else qt(e,3,n)},Vt=function(t,e){t.w||2!=t.l&&3!=t.l||Jt(t),t.J?t.J.next=e:t.w=e,t.J=e},Ft=function(t,e,n,r){var a=Gt(null,null,null);return a.F=new Rt((function(t,o){a.Z=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,a.R=n?function(e){try{var a=n.call(r,e);!i(a)&&e instanceof Xt?o(e):t(a)}catch(t){o(t)}}:o})),a.F.s=t,Vt(t,a),a.F};Rt.prototype.lc=function(t){this.l=0,qt(this,2,t)},Rt.prototype.mc=function(t){this.l=0,qt(this,3,t)};var qt=function(t,e,n){if(0==t.l){t===n&&(e=3,n=new TypeError("Promise cannot resolve to itself")),t.l=1;t:{var i=n,a=t.lc,o=t.mc;if(i instanceof Rt){Vt(i,Gt(a||r,o||null,t));var u=!0}else{if(i)try{var l=!!i.$goog_Thenable}catch(t){l=!1}else l=!1;if(l)i.then(a,o,t),u=!0;else{if(c(i))try{var h=i.then;if(s(h)){Kt(i,h,a,o,t),u=!0;break t}}catch(e){o.call(t,e),u=!0;break t}u=!1}}}u||(t.jb=n,t.l=e,t.s=null,Jt(t),3!=e||n instanceof Xt||Zt(t,n))}},Kt=function(t,e,n,i,r){var a=!1,o=function(t){a||(a=!0,i.call(r,t))};try{e.call(t,(function(t){a||(a=!0,n.call(r,t))}),o)}catch(t){o(t)}},Jt=function(t){t.wa||(t.wa=!0,Lt(t.Ab,t))},Wt=function(t){var e=null;return t.w&&(e=t.w,t.w=e.next,e.next=null),t.w||(t.J=null),e};Rt.prototype.Ab=function(){for(var t;t=Wt(this);)Yt(this,t,this.l,this.jb);this.wa=!1};var Yt=function(t,e,n,i){if(3==n&&e.R&&!e.ca)for(;t&&t.ga;t=t.s)t.ga=!1;if(e.F)e.F.s=null,zt(e,n,i);else try{e.ca?e.Z.call(e.context):zt(e,n,i)}catch(t){$t.call(null,t)}Bt.put(e)},zt=function(t,e,n){2==e?t.Z.call(t.context,n):t.R&&t.R.call(t.context,n)},Zt=function(t,e){t.ga=!0,Lt((function(){t.ga&&$t.call(null,e)}))},$t=It,Xt=function(t){g.call(this,t)};v(Xt,g),Xt.prototype.name="cancel";var Qt=function(t,e,n){this.T=t,this.resolve=e,this.reject=n},te=function(){this.da=this.da,this.la=this.la};te.prototype.da=!1,te.prototype.ua=function(){this.da||(this.da=!0,this.va())},te.prototype.va=function(){if(this.la)for(;this.la.length;)this.la.shift()()};var ee=function(t,e,n){te.call(this),this.Pb=null!=n?f(t,n):t,this.Nb=e,this.wb=f(this.Xb,this),this.ra=[]};v(ee,te),(t=ee.prototype).U=!1,t.$=0,t.I=null,t.Db=function(t){this.ra=arguments,this.I||this.$?this.U=!0:ne(this)},t.stop=function(){this.I&&(e.clearTimeout(this.I),this.I=null,this.U=!1,this.ra=[])},t.pause=function(){this.$++},t.resume=function(){this.$--,this.$||!this.U||this.I||(this.U=!1,ne(this))},t.va=function(){ee.kc.va.call(this),this.stop()},t.Xb=function(){this.I=null,this.U&&!this.$&&(this.U=!1,ne(this))};var ne=function(t){var n=t.wb,i=t.Nb;if(!s(n)){if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=f(n.handleEvent,n)}n=2147483647<Number(i)?-1:e.setTimeout(n,i||0),t.I=n,t.Pb.apply(null,t.ra)},ie=function(t){t.controller=this,this.g=t,this.C=this.j=this.h=null,this.gb=this.Wb.bind(this),this.O=this.Tb.bind(this),this.P=this.Ub.bind(this),this.v=0,this.nc=new ee(this.Bb,200,this)};(t=ie.prototype).Ia=function(){this.j&&(this.v++,this.g.isPaused=!this.g.isPaused,this.g.isPaused?this.j.pause(null,this.P,this.O):this.j.play(null,this.P,this.O))},t.stop=function(){this.j&&(this.v++,this.j.stop(null,this.P,this.O))},t.seek=function(){if(this.j){this.C&&(clearTimeout(this.C),this.C=null),this.v++;var t=new chrome.cast.media.SeekRequest;t.currentTime=this.g.currentTime,this.j.seek(t,this.P,this.O)}},t.Ga=function(){this.h&&(this.v++,this.g.isMuted=!this.g.isMuted,this.h.setReceiverMuted(this.g.isMuted,this.P,this.O))},t.Qa=function(){this.nc.Db()},t.Bb=function(){this.h&&(this.v++,this.h.setReceiverVolumeLevel(this.g.volumeLevel,this.P,this.O))},t.Ub=function(){this.v--,this.D()},t.Tb=function(){this.v--,this.j&&this.j.getStatus(null,r,r)},t.Wb=function(){this.j&&("function"==typeof this.j.getEstimatedBreakTime&&(this.g.currentBreakTime=this.j.getEstimatedBreakTime()),"function"==typeof this.j.getEstimatedBreakClipTime&&(this.g.currentBreakTime=this.j.getEstimatedBreakClipTime()),this.g.currentTime=this.j.getEstimatedTime(),this.C=setTimeout(this.gb,1e3))},t.D=function(t){if(!(0<this.v))if(this.h){this.g.displayName=this.h.displayName||"";var e=this.h.statusText||"";if(this.g.displayStatus=e!=this.g.displayName?e:"",!t&&this.h.receiver&&(t=this.h.receiver.volume)&&(null!=t.muted&&(this.g.isMuted=t.muted),null!=t.level&&(this.g.volumeLevel=t.level),this.g.canControlVolume="fixed"!=t.controlType),this.j){if(t=this.j.breakStatus,e=this.j,ce(t)){var n=oe(t,e.media),i=se(t,e.media);this.g.isPlayingBreak=!0;var r=this.g,o=(o=n)&&"array"==a(o.breakClipIds)?o.breakClipIds.length:0;r.numberBreakClips=o,n&&i?r=0>(r=n.breakClipIds.indexOf(i.id))?0:r:r=0,this.g.currentBreakClipNumber=r,this.g.currentBreakTime="function"==typeof e.getEstimatedBreakTime?e.getEstimatedBreakTime():t.currentBreakTime,this.g.currentBreakClipTime="function"==typeof e.getEstimatedBreakClipTime?e.getEstimatedBreakClipTime():t.currentBreakClipTime,this.g.breakId=t.breakId,this.g.breakClipId=t.breakClipId,this.g.whenSkippable=t.whenSkippable}else this.g.isPlayingBreak=!1,this.g.numberBreakClips=0,this.g.currentBreakClipNumber=0,this.g.currentBreakTime=void 0,this.g.currentBreakClipTime=void 0,this.g.breakId=void 0,this.g.breakClipId=void 0,this.g.whenSkippable=void 0;this.g.isMediaLoaded=e.playerState!=chrome.cast.media.PlayerState.IDLE,this.g.isPaused=e.playerState==chrome.cast.media.PlayerState.PAUSED,this.g.canPause=0<=e.supportedMediaCommands.indexOf(chrome.cast.media.MediaCommand.PAUSE),this.ba(e.media),this.g.canSeek=(!ce(t)||!(null==t.whenSkippable||0>t.whenSkippable||t.currentBreakClipTime<t.whenSkippable))&&(0<=e.supportedMediaCommands.indexOf(chrome.cast.media.MediaCommand.SEEK)&&0!=this.g.duration),this.g.currentTime=e.getEstimatedTime(),this.C&&(clearTimeout(this.C),this.C=null),e.playerState==chrome.cast.media.PlayerState.PLAYING&&(this.C=setTimeout(this.gb,1e3))}else this.ba(null)}else this.g.displayName="",this.g.displayStatus="",this.ba(null)},t.ba=function(t){t?(this.g.duration=t.duration||0,t.metadata&&t.metadata.title&&(this.g.displayStatus=t.metadata.title)):(this.g.isMediaLoaded=!1,this.g.canPause=!1,this.g.canSeek=!1,this.g.currentTime=0,this.g.duration=0,this.g.isPlayingBreak=!1,this.g.numberBreakClips=0,this.g.currentBreakClipNumber=0,this.g.currentBreakTime=void 0,this.g.currentBreakClipTime=void 0,this.g.breakId=void 0,this.g.breakClipId=void 0,this.g.whenSkippable=void 0)};var re=function(t){if(!t.j)for(var e=0,n=t.h.media;e<n.length;e++)if(!n[e].idleReason){t.j=n[e],t.j.addUpdateListener(t.Qb.bind(t));break}},ae=function(t,e){t.h=e,e.addMediaListener(t.cb.bind(t)),e.addUpdateListener(t.Oa.bind(t)),re(t),t.D()};(t=ie.prototype).Oa=function(t){t||(this.j=this.h=null),this.D()},t.cb=function(){re(this),this.D(!0)},t.Qb=function(t){t||(this.j=null),this.D(!0)},t.Aa=function(t,e){return e?100*t/e:0},t.Ba=function(t,e){return e?t*e/100:0},t.ya=function(t){return 0>t?"":[("0"+Math.floor(t/3600)).substr(-2),("0"+Math.floor(t/60)%60).substr(-2),("0"+Math.floor(t)%60).substr(-2)].join(":")};var oe=function(t,e){return ce(t)&&(e&&e.breaks||[]).find((function(e){return e.id===t.breakId}))||null},se=function(t,e){return ce(t)&&(e&&e.breakClips||[]).find((function(e){return e.id===t.breakClipId}))||null},ce=function(t){return!!t&&i(t.currentBreakClipTime)&&i(t.breakClipId)},ue=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return t=new e(String(t)),void 0!==n&&(t.Ua=n),t}}(bt),le={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"},he=function(t){return le[t]},pe=/[\x00\x22\x27\x3c\x3e]/g,de=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,fe=/</g,me=function(t,e){return(t=(t=e||t)&&t.oc)?(null!=t&&t.Va===St?(t=t.getContent(),t=String(t).replace(de,"").replace(fe,"&lt;"),t=String(t).replace(pe,he)):(t=String(t),t=b(t,void 0)),t=' nonce="'+t+'"'):t="",ue("<style"+t+'>.cast_caf_state_c {fill: var(--connected-color, #4285f4);}.cast_caf_state_d {fill: var(--disconnected-color, #7d7d7d);}.cast_caf_state_h {opacity: 0;}</style><svg x="0px" y="0px" width="100%" height="100%" viewBox="0 0 24 24"><g><path id="cast_caf_icon_arch0" class="cast_caf_status_d" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path id="cast_caf_icon_arch1" class="cast_caf_status_d" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path id="cast_caf_icon_arch2" class="cast_caf_status_d" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path id="cast_caf_icon_box" class="cast_caf_status_d" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path id="cast_caf_icon_boxfill" class="cast_caf_state_h" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>')};me.qc="cast.framework.CastButtonTemplate.icon",y("cast.framework.VERSION","1.0.10"),y("cast.framework.LoggerLevel",{DEBUG:0,INFO:800,WARNING:900,ERROR:1e3,NONE:1500}),y("cast.framework.CastState",{NO_DEVICES_AVAILABLE:"NO_DEVICES_AVAILABLE",NOT_CONNECTED:"NOT_CONNECTED",CONNECTING:"CONNECTING",CONNECTED:"CONNECTED"}),y("cast.framework.SessionState",{NO_SESSION:"NO_SESSION",SESSION_STARTING:"SESSION_STARTING",SESSION_STARTED:"SESSION_STARTED",SESSION_START_FAILED:"SESSION_START_FAILED",SESSION_ENDING:"SESSION_ENDING",SESSION_ENDED:"SESSION_ENDED",SESSION_RESUMED:"SESSION_RESUMED"}),y("cast.framework.CastContextEventType",{CAST_STATE_CHANGED:"caststatechanged",SESSION_STATE_CHANGED:"sessionstatechanged"}),y("cast.framework.SessionEventType",{APPLICATION_STATUS_CHANGED:"applicationstatuschanged",APPLICATION_METADATA_CHANGED:"applicationmetadatachanged",ACTIVE_INPUT_STATE_CHANGED:"activeinputstatechanged",VOLUME_CHANGED:"volumechanged",MEDIA_SESSION:"mediasession"}),y("cast.framework.RemotePlayerEventType",{ANY_CHANGE:"anyChanged",IS_CONNECTED_CHANGED:"isConnectedChanged",IS_MEDIA_LOADED_CHANGED:"isMediaLoadedChanged",QUEUE_DATA_CHANGED:"queueDataChanged",VIDEO_INFO_CHANGED:"videoInfoChanged",DURATION_CHANGED:"durationChanged",CURRENT_TIME_CHANGED:"currentTimeChanged",IS_PAUSED_CHANGED:"isPausedChanged",VOLUME_LEVEL_CHANGED:"volumeLevelChanged",CAN_CONTROL_VOLUME_CHANGED:"canControlVolumeChanged",IS_MUTED_CHANGED:"isMutedChanged",CAN_PAUSE_CHANGED:"canPauseChanged",CAN_SEEK_CHANGED:"canSeekChanged",DISPLAY_NAME_CHANGED:"displayNameChanged",STATUS_TEXT_CHANGED:"statusTextChanged",TITLE_CHANGED:"titleChanged",DISPLAY_STATUS_CHANGED:"displayStatusChanged",MEDIA_INFO_CHANGED:"mediaInfoChanged",IMAGE_URL_CHANGED:"imageUrlChanged",PLAYER_STATE_CHANGED:"playerStateChanged",IS_PLAYING_BREAK_CHANGED:"isPlayingBreakChanged",NUMBER_BREAK_CLIPS_CHANGED:"numberBreakClipsChanged",CURRENT_BREAK_CLIP_NUMBER_CHANGED:"currentBreakClipNumberChanged",CURRENT_BREAK_TIME_CHANGED:"currentBreakTimeChanged",CURRENT_BREAK_CLIP_TIME_CHANGED:"currentBreakClipTimeChanged",BREAK_ID_CHANGED:"breakIdChanged",BREAK_CLIP_ID_CHANGED:"breakClipIdChanged",WHEN_SKIPPABLE_CHANGED:"whenSkippableChanged",LIVE_SEEKABLE_RANGE_CHANGED:"liveSeekableRangeChanged"}),y("cast.framework.ActiveInputState",{ACTIVE_INPUT_STATE_UNKNOWN:-1,ACTIVE_INPUT_STATE_NO:0,ACTIVE_INPUT_STATE_YES:1});var ye=function(t){ct().Pa(function(t){if(!rt){rt={};for(var e,n=0;e=it[n];n++)rt[e.value]=e,rt[e.name]=e}if(t in rt)return rt[t];for(n=0;n<it.length;++n)if((e=it[n]).value<=t)return e;return null}(t))};if(y("cast.framework.setLoggerLevel",ye),vt||(vt=new yt),vt){var ve=vt;if(1!=ve.ab){var ge=ct(),Ee=ve.Zb;ge.X||(ge.X=[]),ge.X.push(Ee),ve.ab=!0}}ye(1e3);var Se=function(t){this.type=t};y("cast.framework.EventData",Se);var Ce=function(t){function e(e){var n;return(n=t.call(this,"activeinputstatechanged")||this).activeInputState=e,n}return l(e,t),e}(Se);y("cast.framework.ActiveInputStateEventData",Ce);var be=function(){function t(t){this.applicationId=t.appId,this.name=t.displayName,this.images=t.appImages,this.namespaces=this.Ha(t.namespaces||[])}return t.prototype.Ha=function(t){return t.map((function(t){return t.name}))},t}();y("cast.framework.ApplicationMetadata",be);var _e=function(t){function e(e){var n;return(n=t.call(this,"applicationmetadatachanged")||this).metadata=e,n}return l(e,t),e}(Se);y("cast.framework.ApplicationMetadataEventData",_e);var Te=function(t){function e(e){var n;return(n=t.call(this,"applicationstatuschanged")||this).status=e,n}return l(e,t),e}(Se);y("cast.framework.ApplicationStatusEventData",Te);var Ie=ut("cast.framework.EventTarget"),Ne=function(){function t(){this.Y={}}var e=t.prototype;return e.addEventListener=function(t,e){t in this.Y||(this.Y[t]=[]),(t=this.Y[t]).includes(e)||t.push(e)},e.removeEventListener=function(t,e){0<=(e=(t=this.Y[t]||[]).indexOf(e))&&t.splice(e,1)},e.dispatchEvent=function(t){t&&t.type&&(this.Y[t.type]||[]).slice().forEach((function(e){try{e(t)}catch(e){Ie&&Ie.log(Q,"Handler for "+t.type+" event failed: "+e,e)}}))},t}(),Ae=function(t){t=t||{},this.receiverApplicationId=t.receiverApplicationId||null,this.resumeSavedSession=!i(t.resumeSavedSession)||t.resumeSavedSession,this.autoJoinPolicy=i(t.autoJoinPolicy)?t.autoJoinPolicy:chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED,this.language=t.language||null};y("cast.framework.CastOptions",Ae);var we=function(t){function e(e){var n;return(n=t.call(this,"mediasession")||this).mediaSession=e,n}return l(e,t),e}(Se);y("cast.framework.MediaSessionEventData",we);var ke=function(t){function e(e,n){var i;return(i=t.call(this,"volumechanged")||this).volume=e,i.isMute=n,i}return l(e,t),e}(Se);y("cast.framework.VolumeEventData",ke);var De=function(t,e){t.hb=e,!e.volume||t.o&&t.o.muted==e.volume.muted&&t.o.level==e.volume.level||(t.o=e.volume,t.m.dispatchEvent(new ke(t.o.level,t.o.muted))),t.ia!=e.isActiveInput&&(t.ia=e.isActiveInput,e=t.ia,t.m.dispatchEvent(new Ce(null==e?-1:e?1:0)))},Le=function(){function t(t,e){this.m=new Ne,this.l=e,this.i=t,this.kb=t.sessionId,this.aa=t.statusText,this.hb=t.receiver,this.o=t.receiver.volume,this.ja=new be(t),this.ia=t.receiver.isActiveInput,this.i.addMediaListener(this.Fa.bind(this)),function(t){var e=t.i.loadMedia.bind(t.i);t.i.loadMedia=function(n,i,r){e(n,(function(e){i&&i(e),t.Fa(e)}),r)};var n=t.i.queueLoad.bind(t.i);t.i.queueLoad=function(e,i,r){n(e,(function(e){i&&i(e),t.Fa(e)}),r)}}(this)}var e=t.prototype;return e.addEventListener=function(t,e){this.m.addEventListener(t,e)},e.removeEventListener=function(t,e){this.m.removeEventListener(t,e)},e.Lb=function(){return this.i},e.Kb=function(){return this.kb},e.Ca=function(){return this.l},e.Hb=function(){return this.hb},e.Fb=function(){return this.ja},e.Gb=function(){return this.aa},e.Eb=function(){var t=this.ia;return null==t?-1:t?1:0},e.Ya=function(t){"SESSION_ENDED"!=this.l&&(t?this.i.stop(r,r):this.i.leave(r,r))},e.setVolume=function(t){var e=jt(),n=Promise.resolve(e.T);return this.o&&(this.o.level=t,this.o.muted=!1),this.i.setReceiverVolumeLevel(t,(function(){return e.resolve()}),(function(t){return e.reject(t.code)})),n},e.Mb=function(){return this.o?this.o.level:null},e.dc=function(t){var e=jt(),n=Promise.resolve(e.T);return this.o&&(this.o.muted=t),this.i.setReceiverMuted(t,(function(){return e.resolve()}),(function(t){return e.reject(t.code)})),n},e.isMute=function(){return this.o?this.o.muted:null},e.sendMessage=function(t,e){var n=jt(),i=Promise.resolve(n.T);return this.i.sendMessage(t,e,(function(){return n.resolve()}),(function(t){return n.reject(t.code)})),i},e.addMessageListener=function(t,e){this.i.addMessageListener(t,e)},e.removeMessageListener=function(t,e){this.i.removeMessageListener(t,e)},e.loadMedia=function(t){var e=jt(),n=Promise.resolve(e.T);return this.i.loadMedia(t,(function(){e.resolve()}),(function(t){e.reject(t.code)})),n},e.za=function(){t:{var t=this.i;if(t.media)for(var e,n=h(t.media);!(e=n()).done;){var i=e.value;if(!i.idleReason){t=i;break t}}t=null}return t},e.Fa=function(t){t.media&&this.m.dispatchEvent(new we(t))},e.Ha=function(t){return t.map((function(t,e){return e.name}))},t}();y("cast.framework.CastSession",Le),Le.prototype.getMediaSession=Le.prototype.za,Le.prototype.loadMedia=Le.prototype.loadMedia,Le.prototype.removeMessageListener=Le.prototype.removeMessageListener,Le.prototype.addMessageListener=Le.prototype.addMessageListener,Le.prototype.sendMessage=Le.prototype.sendMessage,Le.prototype.isMute=Le.prototype.isMute,Le.prototype.setMute=Le.prototype.dc,Le.prototype.getVolume=Le.prototype.Mb,Le.prototype.setVolume=Le.prototype.setVolume,Le.prototype.endSession=Le.prototype.Ya,Le.prototype.getActiveInputState=Le.prototype.Eb,Le.prototype.getApplicationStatus=Le.prototype.Gb,Le.prototype.getApplicationMetadata=Le.prototype.Fb,Le.prototype.getCastDevice=Le.prototype.Hb,Le.prototype.getSessionState=Le.prototype.Ca,Le.prototype.getSessionId=Le.prototype.Kb,Le.prototype.getSessionObj=Le.prototype.Lb,Le.prototype.removeEventListener=Le.prototype.removeEventListener,Le.prototype.addEventListener=Le.prototype.addEventListener;var Pe=function(t){function e(e){var n;return(n=t.call(this,"caststatechanged")||this).castState=e,n}return l(e,t),e}(Se);y("cast.framework.CastStateEventData",Pe);var Me=function(t){function e(e,n,r){var a;return(a=t.call(this,"sessionstatechanged")||this).session=e,a.sessionState=n,a.errorCode=i(r)?r:null,a}return l(e,t),e}(Se);y("cast.framework.SessionStateEventData",Me);var He=ut("cast.framework.CastContext"),Oe=function(t){var e="NO_DEVICES_AVAILABLE";switch(t.u){case"SESSION_STARTING":case"SESSION_ENDING":e="CONNECTING";break;case"SESSION_STARTED":case"SESSION_RESUMED":e="CONNECTED";break;case"NO_SESSION":case"SESSION_ENDED":case"SESSION_START_FAILED":e=t.Na?"NOT_CONNECTED":"NO_DEVICES_AVAILABLE";break;default:lt("Unexpected session state: "+t.u)}e!==t.W&&(t.W=e,t.m.dispatchEvent(new Pe(e)))},Re=function(t,e,n){e==t.u?"SESSION_START_FAILED"==e&&t.m.dispatchEvent(new Me(t.h,t.u,n)):(t.u=e,t.h&&(t.h.l=t.u),t.m.dispatchEvent(new Me(t.h,t.u,n)),Oe(t))},xe=function(){function t(){this.m=new Ne,this.Ea=!1,this.B=null,this.Na=!1,this.W="NO_DEVICES_AVAILABLE",this.u="NO_SESSION",this.oa=this.h=null}var e=t.prototype;return e.addEventListener=function(t,e){this.m.addEventListener(t,e)},e.removeEventListener=function(t,e){this.m.removeEventListener(t,e)},e.ec=function(t){if(this.Ea)lt("CastContext already initialized, new options are ignored");else{if(this.B=new Ae(t),!this.B||!this.B.receiverApplicationId)throw Error("Missing application id in cast options");t=new chrome.cast.SessionRequest(this.B.receiverApplicationId),this.B.language&&(t.language=this.B.language),t=new chrome.cast.ApiConfig(t,this.lb.bind(this),this.ac.bind(this),this.B.autoJoinPolicy),chrome.cast.initialize(t,r,r),chrome.cast.addReceiverActionListener(this.$b.bind(this)),this.Ea=!0}},e.Ib=function(){return this.W},e.Ca=function(){return this.u},e.requestSession=function(){var t=this;if(!this.Ea)throw Error("Cannot start session before cast options are provided");var e=jt(),n=Promise.resolve(e.T);Ft(e.T,null,r,void 0),n.catch(r);var i="NOT_CONNECTED"==this.W;return chrome.cast.requestSession((function(n){t.lb(n),e.resolve(null)}),(function(n){i&&Re(t,"SESSION_START_FAILED",n?n.code:void 0),e.reject(n.code)})),n},e.Jb=function(){return this.h},e.zb=function(t){this.h&&this.h.Ya(t)},e.ac=function(t){(this.Na=t==chrome.cast.ReceiverAvailability.AVAILABLE)&&!this.h&&this.oa&&this.B.resumeSavedSession&&chrome.cast.requestSessionById(this.oa),Oe(this)},e.$b=function(t,e){this.h||e!=chrome.cast.ReceiverAction.CAST?this.h&&e==chrome.cast.ReceiverAction.STOP?Re(this,"SESSION_ENDING"):t&&De(this.h,t):Re(this,"SESSION_STARTING")},e.lb=function(t){var e="SESSION_STARTING"==this.u?"SESSION_STARTED":"SESSION_RESUMED";this.oa=null,this.h=new Le(t,e),t.addUpdateListener(this.Oa.bind(this)),Re(this,e)},e.Oa=function(){if(this.h)switch(this.h.i.status){case chrome.cast.SessionStatus.DISCONNECTED:case chrome.cast.SessionStatus.STOPPED:Re(this,"SESSION_ENDED"),this.oa=this.h.kb,this.h=null;break;case chrome.cast.SessionStatus.CONNECTED:var t,e=this.h,n=e.ja,i=e.i;if(t=n.applicationId==i.appId&&n.name==i.displayName)t:if(t=n.namespaces,n=n.Ha(i.namespaces||[]),o(t)&&o(n)&&t.length==n.length){i=t.length;for(var r=0;r<i;r++)if(t[r]!==n[r]){t=!1;break t}t=!0}else t=!1;t||(e.ja=new be(e.i),e.m.dispatchEvent(new _e(e.ja))),De(e,e.i.receiver),e.aa!=e.i.statusText&&(e.aa=e.i.statusText,e.m.dispatchEvent(new Te(e.aa)));break;default:lt("Unknown session status "+this.h.i.status)}else lt("Received session update event without known session")},t}();y("cast.framework.CastContext",xe),xe.prototype.endCurrentSession=xe.prototype.zb,xe.prototype.getCurrentSession=xe.prototype.Jb,xe.prototype.requestSession=xe.prototype.requestSession,xe.prototype.getSessionState=xe.prototype.Ca,xe.prototype.getCastState=xe.prototype.Ib,xe.prototype.setOptions=xe.prototype.ec,xe.prototype.removeEventListener=xe.prototype.removeEventListener,xe.prototype.addEventListener=xe.prototype.addEventListener,xe.Da=void 0,xe.L=function(){return xe.Da?xe.Da:xe.Da=new xe},xe.getInstance=xe.L;var Be,Ge=function(){xe.L().requestSession()},je=function(t,e){t.setAttribute("class",e?"cast_caf_state_c":"cast_caf_state_d")},Ue=function(t){if("NO_DEVICES_AVAILABLE"==t.l)t.K.style.display="none";else switch(t.K.style.display=t.yb,t.l){case"NOT_CONNECTED":qe(t,!1,"cast_caf_state_h");break;case"CONNECTING":qe(t,!1,"cast_caf_state_h"),t.S||t.Xa();break;case"CONNECTED":qe(t,!0,"cast_caf_state_c")}},Ve=function(t,e){t.ta=xe.L(),t.fb=t.Vb.bind(t),t.qa=[];for(var n=0;3>n;n++)t.qa.push(e.querySelector("#cast_caf_icon_arch"+n));t.ub=e.querySelector("#cast_caf_icon_box"),t.vb=e.querySelector("#cast_caf_icon_boxfill"),t.Ma=0,t.S=null,t.yb=window.getComputedStyle(t.K,null).display,t.l=t.ta.W,Ue(t),t.K.addEventListener("click",Ge),t.ta.addEventListener("caststatechanged",t.fb)},Fe=function(t){t.ta.removeEventListener("caststatechanged",t.fb),null!==t.S&&(window.clearTimeout(t.S),t.S=null)},qe=function(t,e,n){for(var i,r=h(t.qa);!(i=r()).done;){var a=i.value;je(a,e)}je(t.ub,e),t.vb.setAttribute("class",n)},Ke=function(){function t(t){this.K=t;try{this.K.attachShadow({mode:"open"}).innerHTML=me().getContent()}catch(n){t=this.K;var e=function(){var t=me(void 0,void 0);if(!c(t))return F(String(t));if(t instanceof Ct){if(t.Va!==St)throw Error("Sanitized content was not of kind HTML.");return K(t.toString(),t.Ua||null)}return C("Soy template output is unsafe for use as HTML: "+t),F("zSoyz")}();if(z())for(;t.lastChild;)t.removeChild(t.lastChild);t.innerHTML=V(e)}}var e=t.prototype;return e.Vb=function(t){this.l=t.castState,Ue(this)},e.Xa=function(){if(this.S=null,"CONNECTING"==this.l){for(var t=0;3>t;t++)je(this.qa[t],t==this.Ma);this.Ma=(this.Ma+1)%3,this.S=window.setTimeout(this.Xa.bind(this),300)}},t}(),Je=function(t){function e(){var e;return(e=t.call(this)||this).A=new Ke(n(e)),e}l(e,t);var i=e.prototype;return i.connectedCallback=function(){Ve(this.A,this.shadowRoot||this)},i.disconnectedCallback=function(){Fe(this.A)},i.ua=function(){},e}(u(HTMLElement)),We=function(t){function e(){var e;return(e=t.call(this)||this).A=new Ke(n(e)),e}l(e,t);var i=e.prototype;return i.connectedCallback=function(){Ve(this.A,this.shadowRoot||this)},i.disconnectedCallback=function(){Fe(this.A)},i.ua=function(){},e}(u(HTMLButtonElement)),Ye=function(){document.querySelectorAll("button[is=google-cast-button], google-cast-launcher").forEach((function(t){return ze(t)}))},ze=function(t){t.A=new Ke(t),Ve(t.A,t.shadowRoot||t),t.ua=function(){Fe(t.A)}};customElements.define?(customElements.define("google-cast-button",We,{extends:"button"}),customElements.define("google-cast-launcher",Je)):("complete"!==document.readyState?window.addEventListener("load",Ye):Ye(),Be=document.createElement.bind(document),document.createElement=function(t,e){if("google-cast-launcher"===t||"button"===t&&e&&("google-cast-button"===e||"google-cast-button"===e.is)){var n=Be(t,e);return ze(n),n}return Be.apply(void 0,arguments)}),y("cast.framework.RemotePlayer",function(){return function(){this.isMediaLoaded=this.isConnected=!1,this.videoInfo=this.queueData=void 0,this.currentTime=this.duration=0,this.volumeLevel=1,this.canControlVolume=!0,this.canSeek=this.canPause=this.isMuted=this.isPaused=!1,this.displayStatus=this.title=this.statusText=this.displayName="",this.controller=this.savedPlayerState=this.playerState=this.imageUrl=this.mediaInfo=null,this.isPlayingBreak=!1,this.currentBreakClipNumber=this.numberBreakClips=0,this.liveSeekableRange=this.whenSkippable=this.breakClipId=this.breakId=this.currentBreakClipTime=this.currentBreakTime=void 0}}());var Ze=function(t){function e(e,n,i){var r;return(r=t.call(this,e)||this).field=n,r.value=i,r}return l(e,t),e}(Se);y("cast.framework.RemotePlayerChangedEvent",Ze);var $e=function(t){function e(e){var i,r=new Ne;return(i=t.call(this,function(t,e){return new window.Proxy(t,{set:function(t,n,i){return i===t[n]||(t[n]=i,e.dispatchEvent(new Ze(n+"Changed",n,i)),e.dispatchEvent(new Ze("anyChanged",n,i))),!0}})}(e,r))||this).m=r,i.Sb=0,(e=xe.L()).addEventListener("sessionstatechanged",i.cc.bind(n(i))),(e=e.h)?ae(n(i),e.i):i.D(),i}l(e,t);var i=e.prototype;return i.addEventListener=function(t,e){this.m.addEventListener(t,e)},i.removeEventListener=function(t,e){this.m.removeEventListener(t,e)},i.cc=function(t){switch(t.sessionState){case"SESSION_STARTED":case"SESSION_RESUMED":this.g.isConnected=!0;var e=t.session&&t.session.i;e&&(ae(this,e),t.session.addEventListener("mediasession",this.cb.bind(this)))}},i.D=function(e){var n=xe.L().h;n?this.g.savedPlayerState=null:this.g.isConnected&&(this.g.savedPlayerState={mediaInfo:this.g.mediaInfo,currentTime:this.g.currentTime,isPaused:this.g.isPaused}),t.prototype.D.call(this,e),this.g.isConnected=!!n,this.g.statusText=n&&n.aa||"",e=n&&n.za(),this.g.playerState=e&&e.playerState||chrome.cast.media.PlayerState.IDLE,e?(this.g.queueData=e.queueData,this.g.videoInfo=e.videoInfo,this.g.liveSeekableRange="function"==typeof e.getEstimatedLiveSeekableRange?e.getEstimatedLiveSeekableRange():e.liveSeekableRange):(this.g.queueData=void 0,this.g.videoInfo=void 0,this.g.liveSeekableRange=void 0)},i.ba=function(e){t.prototype.ba.call(this,e);var n=(this.g.mediaInfo=e)&&e.metadata;e=null;var i="";n&&(i=n.title||"",(n=n.images)&&0<n.length&&(e=n[0].url)),this.g.title=i,this.g.imageUrl=e},i.Ia=function(){t.prototype.Ia.call(this)},i.stop=function(){t.prototype.stop.call(this)},i.seek=function(){t.prototype.seek.call(this)},i.Ga=function(){t.prototype.Ga.call(this)},i.Qa=function(){t.prototype.Qa.call(this)},i.ya=function(e){return t.prototype.ya.call(this,e)},i.Aa=function(e,n){return t.prototype.Aa.call(this,e,n)},i.Ba=function(e,n){return t.prototype.Ba.call(this,e,n)},i.ic=function(){var t=xe.L().h;if(t){var e=t.za();e&&t&&t.sendMessage("urn:x-cast:com.google.cast.media",{type:"SKIP_AD",requestId:this.Sb++,mediaSessionId:e.mediaSessionId})}},e}(ie);y("cast.framework.RemotePlayerController",$e),$e.prototype.skipAd=$e.prototype.ic,$e.prototype.getSeekTime=$e.prototype.Ba,$e.prototype.getSeekPosition=$e.prototype.Aa,$e.prototype.getFormattedTime=$e.prototype.ya,$e.prototype.setVolumeLevel=$e.prototype.Qa,$e.prototype.muteOrUnmute=$e.prototype.Ga,$e.prototype.seek=$e.prototype.seek,$e.prototype.stop=$e.prototype.stop,$e.prototype.playOrPause=$e.prototype.Ia,$e.prototype.removeEventListener=$e.prototype.removeEventListener,$e.prototype.addEventListener=$e.prototype.addEventListener}).call(window);t.getComponent("Component"),t.getComponent("ControlBar"),t.getComponent("Button");var d=t.getComponent("Tech"),f="IDLE",m="BUFFERING",y="PLAYING",v="PAUSED",g=function(e){function i(t,i){var r;return void 0===i&&(i={}),(r=e.call(this,t,i)||this).castBtn=r.options_.source.cast_,r.apiSession=r.options_.source.apiSession,r.receiver=r.apiSession.getCastDevice().friendlyName,r.castBtn.currentTech=n(r),r.initializeUI(),r.initializeTracks(),r.update(),r.triggerReady(),r}l(i,e);var r=i.prototype;return r.initializeUI=function(){var t=this;this.on("dispose",(function(){console.log("dispose triggered"),t.onMediaStatusUpdate(),t.onSessionUpdate(!1)}))},r.initializeTracks=function(){var e=this.textTracks();if(e){var n=this.handleTextTracksChange.bind(this);e.addEventListener("change",n),this.on("dispose",(function(){e.removeEventListener("change",n)})),this.handleTextTracksChange()}try{if(e=this.audioTracks()){var i=this.handleAudioTracksChange.bind(this);e.addEventListener("change",i),this.on("dispose",(function(){e.removeEventListener("change",i)}))}}catch(e){t.log("get player audioTracks fail"+e)}try{if(e=this.videoTracks()){var r=this.handleVideoTracksChange.bind(this);e.addEventListener("change",r),this.on("dispose",(function(){e.removeEventListener("change",r)}))}}catch(e){t.log("get player videoTracks fail"+e)}},r.createEl=function(){return t.dom.createEl("div",{id:this.options_.techId,className:"vjs-tech vjs-tech-chromecast"})},r.update=function(){this.el_.innerHTML='<div class="casting-image" style="background-image: url(\''+this.options_.poster+'\')"></div><div class="casting-overlay"><div class="casting-information"><div class="casting-icon"></div><div class="casting-description"><small>'+this.localize("CASTING TO")+"</small><br>"+this.receiver+"</div></div></div>"},r.onSessionUpdate=function(t){if(this.apiSession)return t?void 0:this.onStopAppSuccess()},r.onStopAppSuccess=function(){this.stopTrackingCurrentTime(),this.apiSession=null},r.onMediaStatusUpdate=function(){if(this.apiSession)switch(this.castBtn.playerState){case m:this.trigger("waiting");break;case f:this.trigger("timeupdate"),this.trigger("ended");break;case v:this.trigger("pause"),this.paused_=!0;break;case y:this.trigger("playing"),this.trigger("play"),this.paused_=!1}},r.src=function(t){},r.currentSrc=function(){if(this.apiSession)return this.castBtn.sources.src},r.handleAudioTracksChange=function(){var t=[],e=this.textTracks(),n=this.audioTracks();if(n){for(var i=0;i<n.length;i++){n[i].enabled&&t.push(i+1+e.length)}this.apiSession&&t.length&&(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(t),console.log("tracks are changing in remote"))}},r.handleVideoTracksChange=function(){},r.handleTextTracksChange=function(){var t=[],e=this.textTracks();if(e){for(var n=0;n<e.length;n++){"showing"===e[n].mode&&t.push(n+1)}this.apiSession&&t.length&&(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(t),console.log("tracks are requested in remote"))}},r.onTrackSuccess=function(){return t.log("track added")},r.onTrackError=function(e){return t.log("Cast track Error: "+JSON.stringify(e))},r.castError=function(e){return t.log("Cast Error: "+JSON.stringify(e))},r.controls=function(){return!1},r.play=function(){if(this.apiSession)return this.paused_&&this.castBtn.playerHandler.play(),this.paused_=!1},r.pause=function(){if(this.apiSession)return this.paused_||this.castBtn.playerHandler.pause(),this.paused_=!0},r.paused=function(){return this.paused_},r.ended=function(){return"FINISHED"===chrome.cast.media.IdleReason},r.currentTime=function(){return this.apiSession?this.castBtn.remotePlayer.currentTime:0},r.setCurrentTime=function(t){var e=0;return this.apiSession?(e=t,this.castBtn.remotePlayer.currentTime=e,this.castBtn.remotePlayerController.seek(),e):e},r.volume=function(){return this.volume_},r.buffered=function(){},r.duration=function(){return this.apiSession?this.castBtn.player_.duration():0},r.seeked=function(){console.log("has seekd")},r.seeking=function(){return console.log("is seeking"),!0},r.seekable=function(){return console.log("is seekable"),!0},r.setVolume=function(t,e){var n;if(void 0===e&&(e=!1),this.apiSession)return(n=new chrome.cast.Volume).level=t,n.muted=e,this.volume_=n.level,this.muted_=e,(new chrome.cast.media.VolumeRequest).volume=n,this.trigger("volumechange")},r.muted=function(){return this.muted_},r.setMuted=function(t){return this.setVolume(this.volume_,t)},r.supportsFullScreen=function(){return!1},r.resetSrc_=function(t){t()},r.dispose=function(){e.prototype.dispose.call(this,this)},r.playbackRate=function(){return 1},i}(d);g.prototype.paused_=!1,g.prototype.options_={},g.isSupported=function(){return!0},d.withSourceHandlers(g),g.nativeSourceHandler={},g.nativeSourceHandler.canPlayType=function(t){return/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i.test(t)?"probably":/^video\/(mpd|mp4|webm|m3u8)/i.test(t)?"maybe":""},g.nativeSourceHandler.canHandleSource=function(t){return t.type?g.nativeSourceHandler.canPlayType(t.type):t.src?g.nativeSourceHandler.canPlayType(t.src):""},g.nativeSourceHandler.handleSource=function(t,e){e.src(t.src)},g.nativeSourceHandler.dispose=function(){},g.registerSourceHandler(g.nativeSourceHandler),g.prototype.featuresVolumeControl=!0,g.prototype.featuresPlaybackRate=!0,g.prototype.movingMediaElementInDOM=!0,g.prototype.featuresTimeupdateEvents=!0,g.prototype.featuresProgressEvents=!0,g.prototype.featuresNativeTextTracks=!0,g.prototype.featuresNativeAudioTracks=!0,g.prototype.featuresNativeVideoTracks=!0,t.options.chromecast={},void 0===d.getTech("ChromecastTech")&&d.registerTech("ChromecastTech",g);var E=t.getComponent("Component"),S=t.getComponent("ControlBar"),C=t.getComponent("Button"),b=(t.getComponent("Tech"),"IDLE"),_="BUFFERING",T="LOADED",I="PLAYING",N="PAUSED",A=function(e){function i(t,i){var r;return(r=e.call(this,t,i)||this).sources={},r.player=t,r.options=i,r.casting=!1,r.apiSession=null,r.tryingReconnect=0,r.hide(),r.initPlayerHandler(n(r)),r.playerState=b,r.playerStateBeforeSwitch=null,r.remotePlayer=null,r.remotePlayerController=null,r.currentMediaTime=0,r.mediaDuration=-1,r.incrementMediaTimeHandler=r.incrementMediaTime.bind(n(r)),r.mediaInfo=null,r.setupLocalPlayer(),r.addVideoThumbs(),r.initializeUI(t),r}l(i,e);var r=i.prototype;return r.initCastPlayer=function(){var t=this.options_.playerOptions.plugins.chromecast;void 0!==t.appId&&""!==t.appId?this.appId=t.appId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID&&(this.appId=chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID),void 0!==t.autoJoinPolicy&&""!==t.autoJoinPolicy?this.autoJoinPolicy=t.autoJoinPolicy:chrome.cast.AutoJoinPolicy.PAGE_SCOPED&&(this.autoJoinPolicy=chrome.cast.AutoJoinPolicy.PAGE_SCOPED),cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:this.appId,autoJoinPolicy:this.autoJoinPolicy}),this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,function(t){this.switchPlayer(t.value)}.bind(this)),this.apiInitialized=!0},r.initPlayerHandler=function(t){void 0===t&&(t={}),this.playerHandler={},this.playerHandler.target={},this.playerHandler.setTarget=function(e){t.playerHandler.target=e},this.playerHandler.play=function(){t.playerState!=b&&t.playerHandler.target.isMediaLoaded()?(t.playerState=I,t.playerHandler.target.play()):t.playerHandler.load()},this.playerHandler.pause=function(){t.playerState=N,t.playerHandler.target.pause()},this.playerHandler.stop=function(){t.playerState=b,t.playerHandler.target.stop()},this.playerHandler.load=function(){t.playerState=_,t.playerHandler.target.load()},this.playerHandler.isMediaLoaded=function(){return t.playerHandler.target.isMediaLoaded()},this.playerHandler.prepareToPlay=function(){t.mediaDuration=t.playerHandler.getMediaDuration(),t.playerHandler.updateDurationDisplay(),t.playerState=T,t.playerHandler.play(),t.playerHandler.updateDisplay()},this.playerHandler.getCurrentMediaTime=function(){return t.playerHandler.target.getCurrentMediaTime()},this.playerHandler.getMediaDuration=function(){return t.playerHandler.target.getMediaDuration()},this.playerHandler.updateDisplay=function(){t.playerHandler.currentMediaTime=t.playerHandler.target.getCurrentMediaTime(),t.playerHandler.mediaDuration=t.playerHandler.target.getMediaDuration(),t.playerHandler.target.updateDisplay()},this.playerHandler.updateCurrentTimeDisplay=function(){t.playerHandler.target.updateCurrentTimeDisplay()},this.playerHandler.updateDurationDisplay=function(){t.playerHandler.target.updateDurationDisplay()},this.playerHandler.setTimeString=function(e){t.playerHandler.target.setTimeString(e)},this.playerHandler.setVolume=function(e){t.playerHandler.target.setVolume(e)},this.playerHandler.mute=function(){t.playerHandler.target.mute()},this.playerHandler.unMute=function(){t.playerHandler.target.unMute()},this.playerHandler.isMuted=function(){return t.playerHandler.target.isMuted()},this.playerHandler.seekTo=function(e){t.playerHandler.target.seekTo(e)}},r.initializeUI=function(t){var e=this;if(void 0!==t.controlBar){var n=document.createElement("google-cast-launcher");n.setAttribute("class","vjs-chromecast-button");var i=document.getElementsByClassName("vjs-control-bar");i.length>0&&i[0].appendChild(n),t.controlBar.chromecastButton=this,t.controlBar.children_.push(this),this.on(t,"seeked",(function(){e.casting&&e.apiSession&&e.seekMedia(e.player_.currentTime())})),this.on(t,"play",(function(t){e.casting&&e.apiSession&&e.playerHandler.play()})),this.on(t,"pause",(function(t){e.casting&&e.apiSession&&e.playerHandler.pause()})),this.on(t,"volumechange",(function(t){if(e.casting&&e.apiSession){var n=e.player_.volume();e.player_.muted()?(e.playerHandler.mute(),n=0):e.playerHandler.unMute(),e.playerHandler.setVolume(n)}})),this.on(t,"loadedmetadata",(function(t){e.onMediaLoadedLocally(e)})),this.on(t,"dispose",(function(){e.casting&&e.apiSession&&(e.disposed=!0,e.stop())}))}},r.hide=function(){e.prototype.hide.call(this);var t=document.getElementsByClassName("vjs-chromecast-button");t.length>0&&(t[0].style.display="none")},r.show=function(){e.prototype.show.call(this);var t=document.getElementsByClassName("vjs-chromecast-button");t.length>0&&(t[0].style.display="block")},r.buildCSSClass=function(){return"vjs-chromecast-button "+e.prototype.buildCSSClass.call(this,this)},r.receiverListener=function(t){if(!this.disposed)return"available"===t?this.show():this.hide()},r.findSources=function(){var t=null;return null===this.player_?void 0!==this.player.cache_&&null!=this.player.cache_.source&&(t=this.player.cache_.source):t=this.player_.currentSource(),this.sources=t,this.sources},r.switchPlayer=function(t){this.playerStateBeforeSwitch=this.playerState,t&&cast&&cast.framework&&this.remotePlayer.isConnected?(this.playerHandler.pause(),this.setupRemotePlayer()):this.setupLocalPlayer()},r.setupRemotePlayer=function(){this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,function(t){var e=cast.framework.CastContext.getInstance().getCurrentSession();if(!e)return this.mediaInfo=null,void this.playerHandler.updateDisplay();var n=e.getMediaSession();if(!n)return this.mediaInfo=null,void this.playerHandler.updateDisplay();this.apiSession=e,this.mediaInfo=n.media,this.mediaInfo&&(this.isLiveContent=this.mediaInfo.streamType==chrome.cast.media.StreamType.LIVE),n.playerState==I&&this.playerState!==I&&this.playerHandler.prepareToPlay(),this.playerHandler.updateDisplay()}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CAN_SEEK_CHANGED,function(t){}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(){this.remotePlayer.isPaused?this.playerHandler.pause():this.playerState!==I&&this.playerHandler.play()}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){this.remotePlayer.isMuted?this.playerHandler.mute():this.playerHandler.unMute()}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(){var t=this.remotePlayer.volumeLevel;this.player_.setVolume(t)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,function(t){this.isPlayingBreak(t.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.WHEN_SKIPPABLE_CHANGED,function(t){this.onWhenSkippableChanged(t.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_BREAK_CLIP_TIME_CHANGED,function(t){this.onCurrentBreakClipTimeChanged(t.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.BREAK_CLIP_ID_CHANGED,function(t){this.onBreakClipIdChanged(t.value)}.bind(this)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,function(e){t.log("LIVE_SEEKABLE_RANGE_CHANGED"),this.liveSeekableRange=e.value}.bind(this));var e={};e.play=function(){this.remotePlayer.isPaused&&(this.remotePlayerController.playOrPause(),this.player_.play())}.bind(this),e.pause=function(){this.remotePlayer.isPaused||(this.remotePlayerController.playOrPause(),this.player_.pause())}.bind(this),e.stop=function(){this.remotePlayerController.stop()}.bind(this),e.load=function(){this.findSources(),t.log("Loading... test");var e=new chrome.cast.media.MediaInfo(this.sources.src,this.sources.type);e.streamType=chrome.cast.media.StreamType.BUFFERED,e.metadata=new chrome.cast.media.TvShowMediaMetadata,e.metadata.title="test",e.metadata.subtitle="subtest";var n=this.player_.poster();n&&(image=new chrome.cast.Image(n),e.metadata.images=[{url:image}]);var i=new chrome.cast.media.LoadRequest(e);i.currentTime=this.currentMediaTime,this.playerStateBeforeSwitch&&this.playerStateBeforeSwitch!=N?i.autoplay=!0:i.autoplay=!1,cast.framework.CastContext.getInstance().getCurrentSession().loadMedia(i).then(function(){this.casting=!0,t.log("Remote media loaded")}.bind(this),function(e){this.playerState=b,t.log("Remote media load error: "+this.getErrorMessage(e)),this.playerHandler.updateDisplay()}.bind(this))}.bind(this),e.isMediaLoaded=function(){var t=cast.framework.CastContext.getInstance().getCurrentSession();if(!t)return!1;var e=t.getMediaSession();return!!e&&(e.playerState!=b&&(this.apiSession=t,!0))}.bind(this),e.getCurrentMediaTime=function(){return this.remotePlayer.currentTime}.bind(this),e.getMediaDuration=function(){return this.remotePlayer.duration}.bind(this),e.updateDisplay=function(){var t=cast.framework.CastContext.getInstance().getCurrentSession();if(t&&t.getMediaSession()&&t.getMediaSession().media){var e=t.getMediaSession().media,n="",i="",r="";e.metadata&&(n=e.metadata.title,n=(n=(i=e.metadata.episodeTitle)?n+": "+i:n)?n+" ":"",r=(r=e.metadata.subtitle)?r+" ":"")}else{this.currentTech.dispose(),this.casting=!1;var a=this.player_.currentTime();this.removeClass("connected"),this.player_.src(this.player_.options_.sources),this.player_.paused()||this.player_.one("seeked",(function(){return this.player_.play()})),this.player_.currentTime(a),this.player_.options_.inactivityTimeout=this.inactivityTimeout}}.bind(this),e.updateCurrentTimeDisplay=function(){this.playerHandler.setTimeString(this.playerHandler.getCurrentMediaTime())}.bind(this),e.updateDurationDisplay=function(){this.playerHandler.setTimeString(this.playerHandler.getMediaDuration())}.bind(this),e.setTimeString=function(t){this.getMediaTimeString(t)}.bind(this),e.setVolume=function(t){var e=this.remotePlayer.volumeLevel;e=t>1?1:t,this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel()}.bind(this),e.mute=function(){this.remotePlayer.isMuted||this.remotePlayerController.muteOrUnmute()}.bind(this),e.unMute=function(){this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()}.bind(this),e.isMuted=function(){return this.remotePlayer.isMuted}.bind(this),e.seekTo=function(t){this.remotePlayer.currentTime=t,this.remotePlayerController.seek()}.bind(this),this.playerHandler.setTarget(e),this.remotePlayer.isMuted&&this.playerHandler.mute(),this.apiSession=cast.framework.CastContext.getInstance().getCurrentSession(),this.player_.loadTech_("ChromecastTech",{cast_:this,apiSession:this.apiSession}),this.apiSession==cast.framework.SessionState.SESSION_RESUMED?(t.log("Resuming session"),this.playerHandler.prepareToPlay()):this.playerHandler.load()},r.setupLocalPlayer=function(){var e={},n=this;e.play=function(){t.log("local player play")},e.pause=function(){t.log("local player pause")},e.stop=function(){t.log("local player stop")},e.load=function(){t.log("local player load")}.bind(this),e.isMediaLoaded=function(){return this.findSources(),this.sources.src}.bind(this),e.getCurrentMediaTime=function(){return void 0!==this.player_?this.player_.currentTime():void 0!==n.player_?n.player_.currentTime():void 0},e.getMediaDuration=function(){return void 0!==this.player_?this.player_.duration():void 0!==n.player_?n.player_.duration():void 0},e.updateDisplay=function(){},e.updateCurrentTimeDisplay=function(){this.currentMediaTime+=1,this.playerHandler.setTimeString(this.currentMediaTime)}.bind(this),e.updateDurationDisplay=function(){this.playerHandler.setTimeString(this.mediaDuration)}.bind(this),e.setTimeString=function(t){this.getMediaTimeString(t)}.bind(this),e.setVolume=function(t){return void 0!==this.player_?this.player_.volume(t):void 0!==n.player_?n.player_.volume(t):void 0},e.mute=function(){return void 0!==this.player_?this.player_.mute(!0):void 0!==n.player_?n.player_.mute(!0):void 0},e.unMute=function(){return void 0!==this.player_?this.player_.mute(!1):void 0!==n.player_?n.player_.mute(!1):void 0},e.isMuted=function(){return void 0!==this.player_?this.player_.mute():void 0!==n.player_?n.player_.mute():void 0},e.seekTo=function(t){return void 0!==this.player_?this.player_.currentTime(t):void 0!==n.player_?n.player_.currentTime(t):void 0},this.playerHandler.setTarget(e),this.playerHandler.setVolume(50),this.currentMediaTime>0&&(this.playerHandler.load(),this.playerHandler.play())},r.onMediaLoadedLocally=function(){this.player_.currentTime(this.currentMediaTime),this.playerHandler.prepareToPlay()},r.addVideoThumbs=function(){},r.seekMedia=function(e){null==this.mediaDuration||cast.framework.CastContext.getInstance().getCurrentSession()&&!this.remotePlayer.canSeek?t.log("Error - Not seekable"):(this.playerState!==I&&this.playerState!==N||(this.currentMediaTime=e),this.playerHandler.seekTo(e))},r.getErrorMessage=function(t){switch(t.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"The API is not initialized."+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.CANCEL:return"The operation was canceled by the user"+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.CHANNEL_ERROR:return"A channel to the receiver is not available."+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.EXTENSION_MISSING:return"The Cast extension is not available."+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.INVALID_PARAMETER:return"The parameters to the operation were not valid."+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"No receiver was compatible with the session request."+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.SESSION_ERROR:return"A session could not be created, or a session was invalid."+(t.description?" :"+t.description:"");case chrome.cast.ErrorCode.TIMEOUT:return"The operation timed out."+(t.description?" :"+t.description:"");default:return t}},r.endPlayback=function(){this.currentMediaTime=0,this.playerState=b,this.this.updateDisplay()},r.getMediaTimeString=function(t){if(null==t||null==t)return null;var e=!1;t<0&&(e=!0,t*=-1);var n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),r=Math.floor(t-3600*n-60*i);return n<10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r),(e?"-":"")+n+":"+i+":"+r},r.getClockTimeString=function(t){if(!t)return"0:00:00";var e=new Date(1e3*t),n=e.getHours(),i=e.getMinutes(),r=e.getSeconds(),a=n>=12?"PM":"AM";return(n=(n%=12)||12)+":"+(i=("0"+i).slice(-2))+":"+(r=("0"+r).slice(-2))+" "+a},r.incrementMediaTime=function(){this.currentMediaTime=this.playerHandler.getCurrentMediaTime(),this.mediaDuration=this.playerHandler.getMediaDuration(),this.playerHandler.updateDurationDisplay(),null==this.mediaDuration||this.currentMediaTime<this.mediaDuration?this.playerHandler.updateCurrentTimeDisplay():this.mediaDuration>0&&this.endPlayback()},i}(C);A.prototype.tryingReconnect=0,A.prototype.inactivityTimeout=2e3,A.prototype.controlText_="Chromecast",S.prototype.options_.children.splice(S.prototype.options_.children.length-1,0,"chromeCastButton"),void 0===E.getComponent("ChromecastButton")&&E.registerComponent("ChromecastButton",A);var w=t.getComponent("Component"),k=(t.getComponent("ControlBar"),t.getComponent("Button"),t.getComponent("Tech"),function(t){function e(e,n){var i;i=t.call(this,e,n)||this;var r=new A(e,n);return window.__onGCastApiAvailable=function(t){t&&r.initCastPlayer()},i}return l(e,t),e}(w));k.prototype.options_={},t.options.children.push("chromecast"),t.addLanguage("en",{"CASTING TO":"CASTING TO"}),void 0===w.getComponent("Chromecast")&&w.registerComponent("Chromecast",k);var D=function(t){var n=this;if(!(!1===t||t&&!1===t.enabled)){if(void 0!==t.mdns||t.mdns){var i=new e,r=i.createBrowser(i.getLibrary().tcp("googlecast"));r.on("serviceUp",(function(t){console.log(t)})),r.on("serviceDown",(function(t){console.log(t)})),r.ready?r.browse():r.once("ready",(function(){r.browse()}))}["appId","altSource","onStop","onError"].forEach((function(e){void 0===n.options_.chromecast&&(n.options_.chromecast=[]),void 0===n.options_.chromecast[e]?t[e]="":t[e]=n.options_.chromecast[e]}));new k(n,t)}},L=t.registerPlugin||t.plugin;return void 0===t.getPlugin("chromecast")&&L("chromecast",D),D.VERSION="0.0.4",D}));
